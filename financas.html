<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinancePro | PRO Edition ğŸ’</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #4f46e5;
            --success: #10b981;
            --danger: #ef4444;
            --bg: #f8fafc;
            --sidebar: #ffffff;
            --text: #1e293b;
        }

        body.dark-mode {
            --bg: #0f172a;
            --sidebar: #1e293b;
            --text: #f8fafc;
        }
        body.dark-mode .card, body.dark-mode .item-transacao, body.dark-mode .form-overlay {
            background: #1e293b;
            border-color: #334155;
            color: white;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; transition: 0.3s; }

        /* --- SIDEBAR --- */
        .sidebar { width: 280px; background: var(--sidebar); border-right: 1px solid #e2e8f0; padding: 30px 20px; display: flex; flex-direction: column; }
        .logo-container { display: flex; align-items: center; gap: 12px; margin-bottom: 40px; }
        .logo-img { width: 45px; height: 45px; }
        .logo-text { font-size: 1.4rem; font-weight: 800; color: var(--primary); }

        nav { display: flex; flex-direction: column; gap: 8px; flex-grow: 1; }
        .nav-link { border: none; background: none; padding: 14px; border-radius: 12px; text-align: left; cursor: pointer; color: #64748b; font-weight: 600; display: flex; align-items: center; gap: 12px; transition: 0.3s; }
        .nav-link:hover, .nav-link.active { background: #f1f5f9; color: var(--primary); }
        .nav-link.btn-saida-nav { color: var(--danger); }
        .nav-link.btn-zap { color: #25d366; }

        /* --- TRAVAS PRO --- */
        .locked-feature { filter: blur(10px); pointer-events: none; opacity: 0.4; }
        .pro-tag { 
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: var(--primary); color: white; padding: 15px 30px; border-radius: 50px;
            font-weight: bold; cursor: pointer; z-index: 100; box-shadow: 0 10px 30px rgba(79, 70, 229, 0.5);
        }

        /* --- MODAL PIX --- */
        .modal-pix { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 2000; backdrop-filter: blur(8px); }
        .modal-content { background: white; padding: 35px; border-radius: 40px; text-align: center; max-width: 400px; width: 90%; }
        .pix-code { background: #f1f5f9; padding: 15px; border-radius: 15px; font-size: 0.75rem; word-break: break-all; margin: 15px 0; border: 1px dashed #cbd5e1; }

        /* --- LAYOUT PRINCIPAL --- */
        .main-content { flex: 1; padding: 40px; overflow-y: auto; display: flex; justify-content: center; }
        .container-central { width: 100%; max-width: 900px; }
        .chart-container { background: white; padding: 25px; border-radius: 35px; border: 1px solid #e2e8f0; margin-bottom: 40px; height: 320px; position: relative; }
        .cards-resumo { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .card { background: white; padding: 25px; border-radius: 25px; border: 1px solid #f1f5f9; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        
        .form-overlay { background: white; padding: 35px; border-radius: 35px; box-shadow: 0 20px 50px rgba(0,0,0,0.1); max-width: 420px; width: 100%; margin: 20px auto; }
        input, select { width: 100%; padding: 18px; border: 1px solid #e2e8f0; border-radius: 15px; font-size: 1rem; margin-bottom: 15px; outline: none; background: transparent; color: inherit; }
        
        .btn-confirmar { width: 100%; padding: 20px; color: white; border: none; border-radius: 15px; font-weight: bold; font-size: 1.1rem; cursor: pointer; transition: 0.3s; }
        .item-transacao { display: flex; align-items: center; padding: 20px; background: white; border-radius: 20px; margin-bottom: 15px; border: 1px solid #f1f5f9; }

        .hidden { display: none !important; }

        @media (max-width: 768px) {
            body { flex-direction: column; }
            .sidebar { width: 100%; height: auto; padding: 15px; border-bottom: 1px solid #e2e8f0; }
            nav { flex-direction: row; flex-wrap: wrap; justify-content: center; }
            .nav-link span { display: none; }
        }
    </style>
</head>
<body>

    <div id="modal-pagamento" class="modal-pix hidden">
        <div class="modal-content">
            <h1 style="font-size: 3rem; margin-bottom: 10px;">ğŸ’</h1>
            <h2 style="color:#000">Seja FinancePro PRO</h2>
            <p style="color: #64748b; margin-bottom: 20px;">Libere o grÃ¡fico e modo escuro por <b>R$ 4,99</b>.</p>
            
            <img id="qrcode-img" src="" style="width: 180px; border-radius: 20px; margin-bottom: 15px;">
            <div class="pix-code" id="pix-texto">CHAVE_PIX_AQUI</div>
            
            <button onclick="enviarZapPagamento()" style="background: #25d366; color: white; border: none; padding: 15px; width: 100%; border-radius: 15px; font-weight: bold; cursor: pointer; margin-bottom: 25px;">
                <i class="fab fa-whatsapp"></i> Enviar Comprovante
            </button>

            <div style="border-top: 1px solid #f1f5f9; padding-top: 20px;">
                <p style="font-size: 0.9rem; margin-bottom: 10px; font-weight: 600; color:#000">JÃ¡ tem o cÃ³digo?</p>
                <input type="text" id="input-codigo" placeholder="Digite seu cÃ³digo" style="text-align: center; border: 2px solid var(--primary); font-weight: 800; color:#000">
                <button onclick="ativarComCodigo()" class="btn-confirmar" style="background: var(--primary);">Ativar Agora âœ¨</button>
            </div>
            
            <button onclick="fecharPagamento()" style="background:none; border:none; color: #94a3b8; margin-top: 20px; cursor: pointer;">Voltar</button>
        </div>
    </div>

    <aside class="sidebar">
        <div class="logo-container">
            <img src="https://cdn-icons-png.flaticon.com/512/2489/2489756.png" class="logo-img">
            <div class="logo-text">Finance<span>Pro</span></div>
        </div>
        
        <nav>
            <button onclick="mostrarTela('dashboard')" class="nav-link active">
                <i class="fas fa-chart-line"></i> <span>Dashboard ğŸ“Š</span>
            </button>
            <button onclick="mostrarTela('entrada')" class="nav-link">
                <i class="fas fa-arrow-up"></i> <span>Novo Saldo ğŸ’°</span>
            </button>
            <button onclick="mostrarTela('saida')" class="nav-link btn-saida-nav">
                <i class="fas fa-arrow-down"></i> <span>Nova SaÃ­da ğŸ’¸</span>
            </button>
            <button onclick="gerarRelatorioZap()" class="nav-link btn-zap">
                <i class="fab fa-whatsapp"></i> <span>RelatÃ³rio Zap ğŸ“±</span>
            </button>
            <button onclick="tentarPro('dark')" class="nav-link">
                <i class="fas fa-moon"></i> <span>Modo Noite ğŸŒ™</span>
            </button>
        </nav>
        <div id="badge-pro" style="font-size: 0.7rem; color: #94a3b8; text-align: center; padding: 15px;">âœ¨ VersÃ£o Free</div>
    </aside>

    <main class="main-content">
        <div class="container-central">
            
            <div id="tela-dashboard" class="tela">
                <h1 style="margin-bottom: 30px;">Meu Resumo ğŸ¦</h1>
                
                <div style="position: relative;">
                    <div id="tag-bloqueio" class="pro-tag hidden" onclick="abrirPagamento()">Liberar GrÃ¡ficos PRO ğŸ’</div>
                    <div id="bloco-grafico" class="chart-container">
                        <canvas id="meuGrafico"></canvas>
                    </div>
                </div>

                <div class="cards-resumo">
                    <div class="card" style="border-top: 6px solid var(--success)"><small>ğŸ“ˆ Ganhos</small><h2 id="tot-ent" style="color: var(--success)">R$ 0,00</h2></div>
                    <div class="card" style="border-top: 6px solid var(--danger)"><small>ğŸ“‰ Gastos</small><h2 id="tot-sai" style="color: var(--danger)">R$ 0,00</h2></div>
                    <div class="card" style="border-top: 6px solid var(--primary)"><small>ğŸ’° Saldo</small><h2 id="tot-sal">R$ 0,00</h2></div>
                </div>
                <h3>HistÃ³rico ğŸ•’</h3><br>
                <div id="lista"></div>
            </div>

            <div id="tela-entrada" class="tela hidden">
                <div class="form-overlay">
                    <h2 style="color: var(--success);">Novo Saldo ğŸ“ˆ</h2><br>
                    <input type="text" id="d-ent" placeholder="Ex: SalÃ¡rio Mensal">
                    <select id="c-ent">
                        <option value="ğŸ’° SalÃ¡rio">ğŸ’° SalÃ¡rio / Renda</option>
                        <option value="ğŸ Presente">ğŸ Presente</option>
                    </select>
                    <input type="number" id="v-ent" placeholder="Valor R$">
                    <button onclick="salvar('entrada')" class="btn-confirmar" style="background: var(--success);">Confirmar Entrada âœ…</button>
                    <button onclick="mostrarTela('dashboard')" style="width:100%; background:none; border:none; margin-top:15px; cursor:pointer;">Voltar</button>
                </div>
            </div>

            <div id="tela-saida" class="tela hidden">
                <div class="form-overlay">
                    <h2 style="color: var(--danger);">Nova SaÃ­da ğŸ“‰</h2><br>
                    <input type="text" id="d-sai" placeholder="Ex: Aluguel ou Jantar">
                    <select id="c-sai">
                        <option value="ğŸ” AlimentaÃ§Ã£o">ğŸ” AlimentaÃ§Ã£o</option>
                        <option value="ğŸ  Moradia">ğŸ  Moradia</option>
                        <option value="ğŸš— Transporte">ğŸš— Transporte</option>
                        <option value="ğŸ¡ Lazer">ğŸ¡ Lazer</option>
                        <option value="ğŸ’³ Boleto">ğŸ’³ Contas</option>
                    </select>
                    <input type="number" id="v-sai" placeholder="Valor R$">
                    <button onclick="salvar('saida')" class="btn-confirmar" style="background: var(--danger);">Confirmar SaÃ­da ğŸ”´</button>
                    <button onclick="mostrarTela('dashboard')" style="width:100%; background:none; border:none; margin-top:15px; cursor:pointer;">Voltar</button>
                </div>
            </div>

        </div>
    </main>

    <script>
        const CHAVE_PIX = "seu-pix@email.com"; 
        const WHATSAPP_DONO = "5511999999999"; 
        const CODIGO_PRO = "PRO2026"; 

        let dados = JSON.parse(localStorage.getItem('fin_v_final_top')) || [];
        let isPro = localStorage.getItem('isPro') === 'true';
        let chart;

        function abrirPagamento() {
            document.getElementById('pix-texto').innerText = CHAVE_PIX;
            document.getElementById('qrcode-img').src = `https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=${encodeURIComponent(CHAVE_PIX)}`;
            document.getElementById('modal-pagamento').classList.remove('hidden');
        }

        function fecharPagamento() { document.getElementById('modal-pagamento').classList.add('hidden'); }

        function ativarComCodigo() {
            if(document.getElementById('input-codigo').value.trim() === CODIGO_PRO) {
                localStorage.setItem('isPro', 'true');
                alert("ACESSO PRO LIBERADO! ğŸ’");
                location.reload();
            } else { alert("CÃ³digo invÃ¡lido!"); }
        }

        function enviarZapPagamento() {
            const msg = encodeURIComponent("OlÃ¡! Fiz o PIX para o FinancePro. Segue o comprovante, quero meu cÃ³digo.");
            window.open(`https://api.whatsapp.com/send?phone=${WHATSAPP_DONO}&text=${msg}`);
        }

        function gerarRelatorioZap() {
            const e = document.getElementById('tot-ent').innerText;
            const s = document.getElementById('tot-sai').innerText;
            const sal = document.getElementById('tot-sal').innerText;
            const msg = `ğŸ“Š *BALANÃ‡O FINANCEPRO*\n\nğŸ“ˆ Ganhos: ${e}\nğŸ“‰ Gastos: ${s}\nğŸ’° Saldo: ${sal}\n\n_Gerado via FinancePro_`;
            window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(msg)}`);
        }

        function tentarPro(f) {
            if(!isPro) return abrirPagamento();
            if(f === 'dark') {
                document.body.classList.toggle('dark-mode');
                localStorage.setItem('dark', document.body.classList.contains('dark-mode'));
            }
        }

        function salvar(tipo) {
            const p = tipo === 'entrada' ? 'ent' : 'sai';
            const v = document.getElementById(`v-${p}`).value;
            const d = document.getElementById(`d-${p}`).value;
            const c = document.getElementById(`c-${p}`).value;
            if(!v || !d) return alert("Preencha tudo!");
            dados.push({ id: Date.now(), desc: d, cat: c, val: parseFloat(v), tipo: tipo, data: new Date().toLocaleDateString('pt-BR') });
            localStorage.setItem('fin_v_final_top', JSON.stringify(dados));
            location.reload();
        }

        function render() {
            const lista = document.getElementById('lista');
            lista.innerHTML = '';
            let e = 0, s = 0;
            dados.forEach(d => {
                if(d.tipo === 'entrada') e += d.val; else s += d.val;
                lista.innerHTML += `
                    <div class="item-transacao">
                        <div style="font-size:1.5rem; margin-right:15px">${d.tipo === 'entrada' ? 'ğŸŸ¢' : 'ğŸ”´'}</div>
                        <div style="flex:1"><strong>${d.desc}</strong><br><small style="color:#94a3b8">${d.cat}</small></div>
                        <div style="font-weight:bold; color:${d.tipo === 'entrada' ? 'var(--success)' : 'var(--danger)'}">
                            R$ ${d.val.toFixed(2)}
                        </div>
                    </div>`;
            });
            document.getElementById('tot-ent').innerText = `R$ ${e.toFixed(2)}`;
            document.getElementById('tot-sai').innerText = `R$ ${s.toFixed(2)}`;
            document.getElementById('tot-sal').innerText = `R$ ${(e - s).toFixed(2)}`;
            if(chart) { chart.data.datasets[0].data = [e, s]; chart.update(); }
        }

        function mostrarTela(t) {
            document.querySelectorAll('.tela').forEach(el => el.classList.add('hidden'));
            document.getElementById('tela-' + t).classList.remove('hidden');
        }

        window.onload = () => {
            if(!isPro) {
                document.getElementById('bloco-grafico').classList.add('locked-feature');
                document.getElementById('tag-bloqueio').classList.remove('hidden');
            } else {
                document.getElementById('badge-pro').innerHTML = "ğŸ’ <b>ASSINATURA PRO ATIVA</b>";
            }
            const ctx = document.getElementById('meuGrafico').getContext('2d');
            chart = new Chart(ctx, {
                type: 'bar',
                data: { labels: ['Ganhos', 'Gastos'], datasets: [{ data: [0, 0], backgroundColor: ['#10b981', '#ef4444'], borderRadius: 12 }] },
                options: { maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { display: false }, x: { grid: { display: false } } } }
            });
            if(localStorage.getItem('dark') === 'true' && isPro) document.body.classList.add('dark-mode');
            render();
        };
    </script>
</body>
</html>